!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports["react-layered-image"]=t(require("react")):e["react-layered-image"]=t(e.react)}(window,(function(e){return n={},t.m=r=[function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.default=n.default},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.LayeredImage=void 0;var o,a,i=r(0),u=r(0),c=r(3);(a=o=o||{}).None="NONE",a.Resize="RESIZE",a.Hover="HOVER",a.Active="ACTIVE",t.LayeredImage=function(e){function t(e,t,r,a,i){var u;void 0===e&&(e=Y),void 0===i&&(i=!1);var s,l=e===o.Resize?{width:s=W.current.container.current.offsetWidth||W.current.container.current.clientWidth||W.current.container.current.scrollWidth,height:Math.round(s/m)}:L,f=l.width,p=l.height,g=document.body.scrollTop||document.documentElement.scrollTop||document.scrollingElement.scrollTop||window.scrollY||window.pageYOffset,y=document.body.scrollLeft||document.documentElement.scrollLeft||document.scrollingElement.scrollLeft||window.scrollX||window.pageXOffset,v=W.current.container.current.getBoundingClientRect(),b=(r-v.left-y)/f,w=(a-v.top-g)/p,x=r-v.left-y-f/2,E=a-v.top-g-p/2,R=(w-E)/(p/2)*8,O=(x-b)/(f/2)*8,S=.01*(b-x),j=.01*(w-E),P=180*Math.atan2(E,x)/Math.PI-90,T=((u={})[o.None]=n({},V),u[o.Resize]={root:{height:p+"px",transform:"perspective("+3*f+"px)"}},u[o.Hover]={container:{transform:"rotateX("+-c.clamp(R,-8,8)+"deg)\n                      rotateY("+-c.clamp(O,-8,8)+"deg)\n                      translateX("+5*-S+"px)\n                      translateY("+5*-j+"px)\n                      scale(1.1)"},layer:function(e){return{transform:"translateX("+1.4*c.clamp(S,-2,2)*e+"px)\n                      translateY("+1.4*c.clamp(j,-2,2)*e+"px)\n                      scale(1.04)"}},light:{backgroundImage:"linear-gradient("+P+"deg, "+M+" 0%, transparent 80%)"},shadow:{boxShadow:"0 40px 100px "+k+", 0 10px 20px "+k}},u[o.Active]={container:{transform:"rotateX("+R/1.4+"deg)\n                      rotateY("+O/1.4+"deg)\n                      scale(1)",transitionDuration:"0.075s"},layer:function(e){return{transform:"translateX("+-S*e+"px)\n                      translateY("+-j*e+"px)\n                      scale(1.02)"}},light:{backgroundImage:"linear-gradient("+P+"deg, "+M+" 0%, transparent 80%)"},shadow:n(n({},V.shadow),{transitionDuration:"0.075s"})},u[e]);i&&t.preventDefault(),Object.keys(T).forEach((function(e){var t=T[e];"layer"===e?h.forEach((function(e,r){return d(q.current[r].current,c.isFunction(t)?t(r):t)})):d(W.current[e].current,t)})),N({width:f,height:p}),z(e)}function r(e){return function(r){return t(e,r,r.pageX,r.pageY,!0)}}function a(e){return function(r){return t(e,r,r.touches[0].pageX,r.touches[0].pageY)}}function f(){return t(o.None)}function p(){return t(o.Resize)}var h=e.layers,g=e.aspectRatio,m=void 0===g?1.6:g,y=e.borderRadius,v=void 0===y?12:y,b=e.transitionDuration,w=void 0===b?.15:b,x=e.transitionTimingFunction,E=void 0===x?"ease-out":x,R=e.lightColor,M=void 0===R?"#fff":R,O=e.lightOpacity,S=void 0===O?.2:O,j=e.shadowColor,k=void 0===j?"#000":j,P=e.shadowOpacity,T=void 0===P?.6:P,_=e.className,I=e.style,D=u.useState({width:0,height:0}),L=D[0],N=D[1],X=u.useState(o.None),Y=X[0],z=X[1],A=u.useState(0),F=A[0],H=A[1],C=u.useState(0)[1],W=u.useRef({root:u.createRef(),container:u.createRef(),shadow:u.createRef(),light:u.createRef()}),q=u.useRef(h.map((function(){return u.createRef()}))),V=u.useMemo((function(){return l(w,M,k)}),[w,M,k]),Z=u.useMemo((function(){return{root:n(n({borderRadius:v},V.root),s.root),container:n(n({borderRadius:v,transitionTimingFunction:E},V.container),s.container),layers:n(n({borderRadius:v},V.layers),s.layers),layer:n(n({transitionTimingFunction:E},V.layer),s.layer),light:n(n({borderRadius:v,opacity:S},V.light),s.light),shadow:n(n({borderRadius:v,opacity:T,transitionTimingFunction:E},V.shadow),s.shadow)}}),[V,v,E,S,T]);return u.useEffect((function(){return h.forEach((function(e){var t=new Image;t.src=e,t.onload=function(){return H((function(e){return e+1}))},t.onerror=function(){return C((function(e){return e+1}))}})),window.addEventListener("resize",p),function(){window.removeEventListener("resize",p)}}),[]),u.useEffect((function(){t(o.Resize)}),[W.current,m]),i.createElement("div",{onMouseEnter:r(o.Hover),onMouseMove:r(),onMouseDown:r(o.Active),onMouseUp:r(o.Hover),onMouseLeave:f,onTouchStart:a(o.Hover),onTouchMove:a(o.Hover),onTouchEnd:f,className:_,style:n(n({},Z.root),I),ref:W.current.root},i.createElement("div",{style:Z.container,ref:W.current.container},i.createElement("div",{style:Z.shadow,ref:W.current.shadow}),i.createElement("div",{style:Z.layers},h.map((function(e,t){return i.createElement("div",{style:n(n({},Z.layer),{backgroundImage:"url("+e+")",opacity:F===h.length?1:0}),ref:q.current[t],key:t})}))),i.createElement("div",{style:Z.light,ref:W.current.light})))},t.LayeredImage.displayName="LayeredImage",t.default=t.LayeredImage;var s={root:{position:"relative",width:"100%",transformStyle:"preserve-3d",cursor:"pointer",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},container:{position:"absolute",width:"100%",height:"100%",transitionProperty:"transform",transformStyle:"preserve-3d"},layers:{position:"absolute",width:"100%",height:"100%",background:"black",transformStyle:"preserve-3d",overflow:"hidden"},layer:{position:"absolute",width:"100%",height:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"transparent",backgroundSize:"cover",transitionProperty:"transform, opacity",opacity:0},light:{position:"absolute",width:"100%",height:"100%"},shadow:{position:"absolute",width:"100%",height:"100%",transitionProperty:"transform, box-shadow",transform:"translateZ(-10px) scale(0.95)"}},l=function(e,t,r){return{container:{transform:"none",transitionDuration:e+"s"},layer:{transform:"none",transitionDuration:e+"s, 500ms"},light:{backgroundImage:"linear-gradient(180deg, "+t+" 0%, transparent 80%)"},shadow:{boxShadow:"0 10px 30px "+r+", 0 6px 10px "+r,transitionDuration:e+"s"}}},d=function(e,t){Object.keys(t).forEach((function(r){c.isSafariDesktop()?e.style[r]=t[r]:requestAnimationFrame((function(){e.style[r]=t[r]}))}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafariDesktop=t.isFunction=t.clamp=void 0,t.clamp=function(e,t,r){var n=r<t?t:r;return null!=e?Math.min(Math.max(e,t),n):e},t.isFunction=function(e){return"function"==typeof e},t.isSafariDesktop=function(){var e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)&&!/Mobi|Android/i.test(e)}}],t.c=n,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1);function t(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return r[e].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r,n}));
//# sourceMappingURL=index.js.map